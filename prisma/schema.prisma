generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["ownerdb", "public"]
}

model User {
  id                                                            Int                             @id @default(autoincrement())
  name                                                          String                          @db.VarChar(50)
  email                                                         String                          @unique @db.VarChar(100)
  password                                                      String?                         @db.VarChar(255)
  phonenum                                                      String?                         @db.VarChar(20)
  preferGame                                                    GameType                        @default(FOUR_BALL)
  loginAt                                                       DateTime                        @default(now())
  logoutAt                                                      DateTime                        @default(now())
  createdAt                                                     DateTime                        @default(now())
  address                                                       String?                         @db.VarChar
  agree_location                                                Boolean                         @default(false)
  agree_marketing                                               Boolean?
  agree_marketing_privacy                                       Boolean?
  agree_privacy                                                 Boolean                         @default(false)
  agree_terms                                                   Boolean                         @default(false)
  agreed_at                                                     DateTime?                       @default(now()) @db.Timestamp(6)
  favorite_store_ids                                            Int[]                           @default([])
  latitude                                                      Float?                          @db.Real
  location                                                      String?
  longitude                                                     Float?                          @db.Real
  mb_id                                                         String?                         @unique(map: "bi_user_mb_id_unique") @db.VarChar(255)
  mb_login_ip                                                   String?                         @db.VarChar
  mb_memo_cnt                                                   Int?
  mb_today_login                                                DateTime?                       @db.Date
  play_style                                                    String[]                        @default([])
  preferred_age_group                                           String[]                        @default([])
  preferred_gender                                              String                          @default("")
  preferred_skill_level                                         String[]                        @default([])
  preferred_time                                                String[]                        @default([])
  profile_image                                                 String?                         @db.VarChar(255)
  provider                                                      String?                         @db.VarChar(20)
  push_auth                                                     String?
  push_enabled                                                  Boolean?                        @default(false)
  push_endpoint                                                 String?
  push_p256dh                                                   String?
  social_id                                                     String?                         @db.VarChar(100)
  user_four_ability                                             Int?
  user_three_ability                                            Int
  bi_level                                                      bi_user_level?                  @default(MEMBER)
  is_banned                                                     Boolean                         @default(false)
  ban_reason                                                    String?
  ban_expires_at                                                DateTime?                       @db.Timestamptz(6)
  warning_count                                                 Int                             @default(0)
  trust_score                                                   Float                           @default(100.0)
  bi_alert                                                      bi_alert[]
  bi_alert_log                                                  bi_alert_log[]
  bi_bookmark                                                   bi_bookmark[]
  bi_chat_room_participants                                     bi_chat_room_participants[]
  bi_club                                                       Club[]
  bi_club_announcement                                          bi_club_announcement[]
  bi_club_gallery                                               bi_club_gallery[]
  bi_club_join_request                                          bi_club_join_request[]
  bi_club_member                                                bi_club_member[]
  bi_club_schedule_participants                                 bi_club_schedule_participants[]
  bi_comment                                                    bi_comment[]
  bi_comment_like                                               bi_comment_like[]
  bi_comment_like_log                                           bi_comment_like_log[]
  bi_comment_log                                                bi_comment_log[]
  bi_inquiry                                                    bi_inquiry[]
  bi_match_bi_match_loser_idTobi_user                           bi_match[]                      @relation("bi_match_loser_idTobi_user")
  bi_match_bi_match_player1_idTobi_user                         bi_match[]                      @relation("bi_match_player1_idTobi_user")
  bi_match_bi_match_player2_idTobi_user                         bi_match[]                      @relation("bi_match_player2_idTobi_user")
  bi_match_bi_match_winner_idTobi_user                          bi_match[]                      @relation("bi_match_winner_idTobi_user")
  bi_match_evaluation_bi_match_evaluation_evaluator_idTobi_user bi_match_evaluation[]           @relation("bi_match_evaluation_evaluator_idTobi_user")
  bi_match_evaluation_bi_match_evaluation_target_idTobi_user    bi_match_evaluation[]           @relation("bi_match_evaluation_target_idTobi_user")
  bi_match_evaluation_bi_match_evaluation_winner_idTobi_user    bi_match_evaluation[]           @relation("bi_match_evaluation_winner_idTobi_user")
  bi_match_participant                                          bi_match_participant[]
  bi_match_reg                                                  bi_match_reg[]
  bi_match_request_bi_match_request_recipient_idTobi_user       bi_match_request[]              @relation("bi_match_request_recipient_idTobi_user")
  bi_match_request_bi_match_request_requester_idTobi_user       bi_match_request[]              @relation("bi_match_request_requester_idTobi_user")
  bi_message                                                    bi_message[]
  bi_message_read                                               bi_message_read[]
  bi_message_read_by                                            bi_message_read_by[]
  bi_post                                                       bi_post[]
  bi_post_like                                                  bi_post_like[]
  bi_post_log_bi_post_log_author_idTobi_user                    bi_post_log[]                   @relation("bi_post_log_author_idTobi_user")
  bi_post_log_bi_post_log_user_idTobi_user                      bi_post_log[]                   @relation("bi_post_log_user_idTobi_user")
  bi_report_bi_report_reported_user_idTobi_user                 bi_report[]                     @relation("bi_report_reported_user_idTobi_user")
  bi_report_bi_report_reporter_idTobi_user                      bi_report[]                     @relation("bi_report_reporter_idTobi_user")
  bi_report_review                                              bi_report_review[]
  bi_user_block_bi_user_block_blocked_idTobi_user               bi_user_block[]                 @relation("bi_user_block_blocked_idTobi_user")
  bi_user_block_bi_user_block_blocker_idTobi_user               bi_user_block[]                 @relation("bi_user_block_blocker_idTobi_user")
  bi_user_penalty                                               bi_user_penalty[]
  bi_user_suspension                                            bi_user_suspension[]
  bi_view_log                                                   bi_view_log[]
  user_sessions                                                 user_sessions[]
  visit_logs                                                    visit_logs[]

  @@unique([social_id, provider], map: "unique_social_id_provider")
  @@map("bi_user")
  @@schema("public")
}

model Game {
  id          Int      @id @default(autoincrement())
  gameType    GameType
  description String?
  gameAverage String?
  gameHighrun Int
  gameInning  Int
  createdAt   DateTime @default(now())
  endAt       DateTime @default(now())

  @@map("bi_game")
  @@schema("public")
}

model Club {
  club_contact_email                          String?                @db.VarChar(100)
  club_contact_phone                          String?                @db.VarChar(20)
  club_created_at                             DateTime               @default(now()) @db.Timestamp(6)
  club_description                            String?
  club_founding_date                          DateTime?              @default(now()) @db.Timestamp(6)
  club_id                                     Int                    @id @default(autoincrement())
  club_location                               String                 @db.VarChar(100)
  club_max_members                            Int?                   @default(50)
  club_name                                   String                 @db.VarChar(100)
  club_now_members                            Int?                   @default(1)
  club_owner_id                               String                 @db.VarChar
  club_place_address                          String?
  club_place_name                             String?                @db.VarChar(100)
  club_regular_day                            String?                @db.VarChar(50)
  club_rules                                  String[]
  club_type                                   String?                @db.VarChar
  club_updated_at                             DateTime               @default(now()) @db.Timestamp(6)
  profile_image_id                            Int?
  banner_image_id                             Int?
  bi_image_bi_club_banner_image_idTobi_image  bi_image?              @relation("bi_club_banner_image_idTobi_image", fields: [banner_image_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  bi_user                                     User                   @relation(fields: [club_owner_id], references: [mb_id], onDelete: NoAction, onUpdate: NoAction)
  bi_image_bi_club_profile_image_idTobi_image bi_image?              @relation("bi_club_profile_image_idTobi_image", fields: [profile_image_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  bi_club_announcement                        bi_club_announcement[]
  bi_club_gallery                             bi_club_gallery[]
  bi_club_join_request                        bi_club_join_request[]
  bi_club_member                              bi_club_member[]
  bi_club_schedule                            bi_club_schedule[]
  bi_club_tag                                 bi_club_tag[]

  @@map("bi_club")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model bi_admin {
  id         Int       @id @default(autoincrement())
  email      String    @unique
  password   String
  name       String
  role       String
  last_login DateTime? @db.Timestamp(6)

  @@schema("ownerdb")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model bi_maintenance_record {
  id          Int      @id @default(autoincrement())
  table_id    Int
  date        DateTime @db.Timestamp(6)
  description String
  status      String
  checked_by  String
  bi_table    bi_table @relation(fields: [table_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("ownerdb")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model bi_member {
  id               Int                @id @default(autoincrement())
  name             String
  phone            String             @unique
  grade            String
  join_date        DateTime?          @default(now()) @db.Timestamp(6)
  visits           Int?               @default(0)
  total_spent      Int?               @default(0)
  point            Int?               @default(0)
  last_visit       DateTime?          @db.Timestamp(6)
  bi_usage_history bi_usage_history[]

  @@schema("ownerdb")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_reservations {
  id               Int       @id @default(autoincrement())
  store_id         Int
  table_number     Int
  customer_name    String    @db.VarChar(50)
  phone            String    @db.VarChar(20)
  reservation_date DateTime  @db.Date
  start_time       DateTime  @db.Time(6)
  end_time         DateTime  @db.Time(6)
  status           String?   @default("confirmed") @db.VarChar(20)
  created_at       DateTime? @default(now()) @db.Timestamp(6)
  updated_at       DateTime? @default(now()) @db.Timestamp(6)
  bi_id            String?   @db.VarChar
  bi_store         bi_store  @relation(fields: [store_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("ownerdb")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model bi_setting {
  id         Int       @id @default(autoincrement())
  key        String    @unique
  value      String
  category   String
  updated_at DateTime? @default(now()) @db.Timestamp(6)

  @@schema("ownerdb")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_store {
  id               Int                      @id @default(autoincrement())
  name             String
  business_no      String?
  owner_name       String?
  phone            String?
  address          String?
  open_time        String?
  close_time       String?
  comment          String?                  @db.VarChar
  hourly_rate      Int?
  per_minute       Int?
  least_rate       Int?
  open_yoil        String?
  bi_id            String?                  @unique(map: "unique_bi_id") @db.VarChar
  has_table        Int?
  directions       String?                  @db.VarChar
  parking_type     String?                  @db.VarChar
  parking_capacity Int?
  parking_note     String?                  @db.VarChar
  weekend_rate     Int?
  brand            String?                  @db.VarChar
  facilities       String?                  @db.VarChar
  saturday_open    String?                  @db.VarChar
  saturday_close   String?                  @db.VarChar
  sunday_open      String?                  @db.VarChar
  sunday_close     String?                  @db.VarChar
  regular_holiday  String?
  created_at       DateTime?                @db.Date
  updated_at       DateTime?                @db.Date
  phone_store      String?                  @db.VarChar
  coord_x          String?                  @db.VarChar
  coord_y          String?                  @db.VarChar
  register_id      String?                  @db.VarChar
  geom             Unsupported("geometry")?
  bi_reservations  bi_reservations[]
  bi_favorites     bi_favorites[]
  bi_match         bi_match[]
  bi_match_request bi_match_request[]
  bi_recent_search bi_recent_search[]
  bi_recent_visit  bi_recent_visit[]

  @@index([geom], map: "idx_bi_store_geom", type: Gist)
  @@map("bi_store")
  @@schema("ownerdb")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_table {
  id                    Int                     @id @default(autoincrement())
  name                  String
  type                  String
  status                String
  hourly_rate           Int
  bi_id                 String                  @db.VarChar
  table_no              Int?
  x                     Float?                  @default(50)
  y                     Float?                  @default(50)
  width                 Float?                  @default(120)
  height                Float?                  @default(60)
  rotation              Int?
  bi_maintenance_record bi_maintenance_record[]
  bi_usage_history      bi_usage_history[]

  @@schema("ownerdb")
}

model bi_usage_history {
  id        Int       @id @default(autoincrement())
  member_id Int
  table_id  Int
  date      DateTime  @db.Timestamp(6)
  duration  Float
  amount    Int
  bi_member bi_member @relation(fields: [member_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bi_table  bi_table  @relation(fields: [table_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("ownerdb")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model spatial_ref_sys {
  srid      Int     @id
  auth_name String? @db.VarChar(256)
  auth_srid Int?
  srtext    String? @db.VarChar(2048)
  proj4text String? @db.VarChar(2048)

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_match {
  match_id                             Int                    @id(map: "matches_pkey") @default(autoincrement())
  player1_id                           String?                @db.VarChar
  player2_id                           String?                @db.VarChar
  match_date                           DateTime?              @default(now()) @db.Timestamp(6)
  location                             Int?
  player1_score                        Int?
  player2_score                        Int?
  winner_id                            String?                @db.VarChar
  loser_id                             String?                @db.VarChar
  player1_dama                         Decimal?               @db.Decimal(5, 2)
  player2_dama                         Decimal?               @db.Decimal(5, 2)
  match_duration                       Int?
  request_status                       request_status?
  request_date                         DateTime?              @default(now()) @db.Timestamp(6)
  response_date                        DateTime?              @db.Timestamp(6)
  preferred_date                       DateTime?              @db.Timestamp(6)
  message                              String?                @db.VarChar(500)
  cancel_reason                        String?                @db.VarChar(200)
  cancelled_by                         String?                @db.VarChar
  is_notified                          Boolean?               @default(false)
  notification_date                    DateTime?              @db.Timestamp(6)
  match_status                         match_status?          @default(PENDING)
  game_type                            game_type_enum?
  match_uid                            String?                @unique(map: "match_uid_unique") @db.VarChar(255)
  bi_checkin                           bi_checkin?
  bi_store                             bi_store?              @relation(fields: [location], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_location")
  bi_user_bi_match_loser_idTobi_user   User?                  @relation("bi_match_loser_idTobi_user", fields: [loser_id], references: [mb_id], onDelete: NoAction, onUpdate: NoAction, map: "matches_loser_id_fkey")
  bi_user_bi_match_player1_idTobi_user User?                  @relation("bi_match_player1_idTobi_user", fields: [player1_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction, map: "matches_player1_id_fkey")
  bi_user_bi_match_player2_idTobi_user User?                  @relation("bi_match_player2_idTobi_user", fields: [player2_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction, map: "matches_player2_id_fkey")
  bi_user_bi_match_winner_idTobi_user  User?                  @relation("bi_match_winner_idTobi_user", fields: [winner_id], references: [mb_id], onDelete: NoAction, onUpdate: NoAction, map: "matches_winner_id_fkey")
  bi_match_evaluation                  bi_match_evaluation[]
  bi_match_participant                 bi_match_participant[]
  bi_match_request                     bi_match_request[]
  bi_user_penalty                      bi_user_penalty[]

  @@schema("public")
}

model bi_match_request {
  request_id                                     Int       @id @default(autoincrement())
  match_id                                       Int
  requester_id                                   String    @db.VarChar
  recipient_id                                   String    @db.VarChar
  request_status                                 String?   @default("PENDING") @db.VarChar(10)
  request_date                                   DateTime? @default(now()) @db.Timestamp(6)
  response_date                                  DateTime? @db.Timestamp(6)
  preferred_date                                 DateTime? @db.Timestamp(6)
  message                                        String?   @db.VarChar(500)
  game_type                                      String?   @db.VarChar(255)
  location                                       Int?
  is_notified                                    Boolean?  @default(false)
  match_uid                                      String?
  bi_match                                       bi_match  @relation(fields: [match_id], references: [match_id], onDelete: NoAction, onUpdate: NoAction)
  bi_user_bi_match_request_recipient_idTobi_user User      @relation("bi_match_request_recipient_idTobi_user", fields: [recipient_id], references: [mb_id], onDelete: NoAction, onUpdate: NoAction)
  bi_user_bi_match_request_requester_idTobi_user User      @relation("bi_match_request_requester_idTobi_user", fields: [requester_id], references: [mb_id], onDelete: NoAction, onUpdate: NoAction)
  bi_store                                       bi_store? @relation(fields: [location], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_match_location_store")

  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model bi_match_evaluation {
  evaluation_id                                     Int       @id @default(autoincrement())
  match_id                                          Int
  evaluator_id                                      String    @db.VarChar
  target_id                                         String    @db.VarChar
  comment                                           String?
  created_at                                        DateTime? @default(now()) @db.Timestamp(6)
  is_anonymous                                      Boolean?  @default(false)
  reported                                          Boolean?  @default(false)
  skill_level_category                              String?   @db.VarChar(50)
  time_category                                     String?   @db.VarChar(50)
  rules_category                                    String?   @db.VarChar(50)
  manner_category                                   String?   @db.VarChar(50)
  high_run                                          Int?
  game_type                                         String?   @db.VarChar(20)
  play_time                                         String?   @db.VarChar(20)
  overall_satisfaction                              String?   @db.VarChar(20)
  winner_id                                         String?   @db.VarChar(255)
  match_uid                                         String?
  bi_user_bi_match_evaluation_evaluator_idTobi_user User      @relation("bi_match_evaluation_evaluator_idTobi_user", fields: [evaluator_id], references: [mb_id], onDelete: NoAction, onUpdate: NoAction)
  bi_match                                          bi_match  @relation(fields: [match_id], references: [match_id], onDelete: NoAction, onUpdate: NoAction)
  bi_user_bi_match_evaluation_target_idTobi_user    User      @relation("bi_match_evaluation_target_idTobi_user", fields: [target_id], references: [mb_id], onDelete: NoAction, onUpdate: NoAction)
  bi_user_bi_match_evaluation_winner_idTobi_user    User?     @relation("bi_match_evaluation_winner_idTobi_user", fields: [winner_id], references: [mb_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_winner_id")

  @@index([winner_id], map: "idx_winner_id")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_alert {
  id         Int       @id @default(autoincrement())
  user_id    Int
  title      String    @db.VarChar(200)
  message    String
  type       String?   @db.VarChar(50)
  status     String?   @default("unread") @db.VarChar(20)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  read_at    DateTime? @db.Timestamp(6)
  category   String?   @db.VarChar(50)
  data       Json?
  bi_user    User      @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_alert_log {
  id              Int       @id @default(autoincrement())
  event_type      String    @db.VarChar(50)
  description     String?
  user_id         Int?
  ip_address      String?   @db.VarChar(45)
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  additional_data Json?
  bi_user         User?     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("public")
}

model bi_match_reg {
  id              Int            @id @default(autoincrement())
  match_type      MatchType      @default(ONE_VS_ONE)
  game_type       game_type_enum @default(FOUR_BALL)
  creator_id      Int
  status          match_status   @default(PENDING)
  player_count    Int
  current_players Int            @default(1)
  created_at      DateTime       @default(now()) @db.Timestamp(6)
  updated_at      DateTime       @default(now()) @db.Timestamp(6)
  billiard_place  Int?
  match_date      DateTime?      @db.Timestamp(6)
  bi_user         User           @relation(fields: [creator_id], references: [id])

  @@schema("public")
}

model bi_match_participant {
  id             Int       @id @default(autoincrement())
  match_id       Int
  user_id        String    @db.VarChar(255)
  team           Int
  created_at     DateTime  @default(now()) @db.Timestamp(6)
  checked_in     Boolean?  @default(false)
  checked_in_at  DateTime? @db.Timestamp(6)
  no_show        Boolean?  @default(false)
  no_show_at     DateTime? @db.Timestamp(6)
  no_show_reason String?   @db.VarChar(255)
  bi_match_reg   bi_match  @relation(fields: [match_id], references: [match_id])
  bi_user        User      @relation(fields: [user_id], references: [mb_id])

  @@unique([match_id, user_id])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_favorites {
  id         Int       @id @default(autoincrement())
  user_id    String    @db.VarChar(255)
  place_id   Int
  created_at DateTime? @default(now()) @db.Timestamp(6)
  bi_store   bi_store  @relation(fields: [place_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_bi_favorites_store")

  @@unique([user_id, place_id])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_recent_search {
  id          Int       @id @default(autoincrement())
  user_id     String    @db.VarChar(255)
  search_term String    @db.VarChar(255)
  place_id    Int?
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  bi_store    bi_store? @relation(fields: [place_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_bi_recent_search_store")

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_recent_visit {
  id         Int       @id @default(autoincrement())
  user_id    String    @db.VarChar(255)
  place_id   Int
  visit_date DateTime? @default(now()) @db.Timestamp(6)
  bi_store   bi_store  @relation(fields: [place_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_bi_recent_visit_store")

  @@index([user_id, visit_date(sort: Desc)], map: "idx_user_visited")
  @@schema("public")
}

model bi_chat_room {
  id                        String                      @id
  name                      String
  group_id                  String
  created_at                DateTime                    @default(now())
  updated_at                DateTime
  bi_chat_room_participants bi_chat_room_participants[]
  bi_message                bi_message[]

  @@schema("public")
}

model bi_message {
  id                 String               @id
  content            String
  sender_id          String
  chat_room_id       String
  created_at         DateTime             @default(now())
  bi_chat_room       bi_chat_room         @relation(fields: [chat_room_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bi_user            User                 @relation(fields: [sender_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction)
  bi_message_read    bi_message_read[]
  bi_message_read_by bi_message_read_by[]

  @@schema("public")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model bi_chat_room_participants {
  chat_room_id         String
  user_id              String
  created_at           DateTime?    @default(now()) @db.Timestamp(6)
  is_admin             Boolean?     @default(false)
  last_read_message_id String?
  bi_chat_room         bi_chat_room @relation(fields: [chat_room_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bi_user              User         @relation(fields: [user_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction)

  @@id([chat_room_id, user_id])
  @@index([user_id])
  @@schema("public")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model bi_message_read_by {
  message_id String
  user_id    String
  read_at    DateTime?  @default(now()) @db.Timestamp(6)
  bi_message bi_message @relation(fields: [message_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bi_user    User       @relation(fields: [user_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction)

  @@id([message_id, user_id])
  @@index([user_id])
  @@schema("public")
}

model bi_message_read {
  message_id   String
  user_id      String
  read_at      DateTime?  @default(now()) @db.Timestamp(6)
  chat_room_id String
  bi_message   bi_message @relation(fields: [message_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bi_user      User       @relation(fields: [user_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction)

  @@id([message_id, user_id])
  @@index([chat_room_id])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_club_announcement {
  club_announcement_id Int      @id @default(autoincrement())
  club_id              Int
  title                String   @db.VarChar(200)
  content              String
  created_at           DateTime @default(now()) @db.Timestamp(6)
  created_by           String   @db.VarChar
  bi_club              Club     @relation(fields: [club_id], references: [club_id], onDelete: Cascade, onUpdate: NoAction)
  bi_user              User     @relation(fields: [created_by], references: [mb_id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_club_gallery {
  club_gallery_id          Int      @id @default(autoincrement())
  club_id                  Int
  club_gallery_image_url   String
  club_gallery_description String?  @db.VarChar(200)
  uploaded_at              DateTime @default(now()) @db.Timestamp(6)
  uploaded_by              String   @db.VarChar
  bi_club                  Club     @relation(fields: [club_id], references: [club_id], onDelete: Cascade, onUpdate: NoAction)
  bi_user                  User     @relation(fields: [uploaded_by], references: [mb_id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_club_join_request {
  request_id   Int      @id @default(autoincrement())
  club_id      Int
  user_id      String   @db.VarChar
  status       String?  @default("pending") @db.VarChar(20)
  requested_at DateTime @default(now()) @db.Timestamp(6)
  bi_club      Club     @relation(fields: [club_id], references: [club_id], onDelete: Cascade, onUpdate: NoAction)
  bi_user      User     @relation(fields: [user_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_club_member {
  club_id                 Int
  user_id                 String   @db.VarChar
  is_staff                Boolean? @default(false)
  staff_role              String?  @db.VarChar(50)
  joined_at               DateTime @default(now()) @db.Timestamp(6)
  member_permission_level String?  @default("member") @db.VarChar(20)
  bi_club                 Club     @relation(fields: [club_id], references: [club_id], onDelete: Cascade, onUpdate: NoAction)
  bi_user                 User     @relation(fields: [user_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction)

  @@id([club_id, user_id])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_club_schedule {
  club_schedule_id              Int                             @id @default(autoincrement())
  club_id                       Int
  club_schedule_title           String                          @db.VarChar(100)
  club_schedule_description     String?
  club_schedule_location        String?                         @db.VarChar(100)
  club_schedule_start_time      DateTime                        @db.Timestamp(6)
  club_schedule_end_time        DateTime?                       @db.Timestamp(6)
  club_schedule_is_competition  Boolean?                        @default(false)
  bi_club                       Club                            @relation(fields: [club_id], references: [club_id], onDelete: Cascade, onUpdate: NoAction)
  bi_club_schedule_participants bi_club_schedule_participants[]

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_club_schedule_participants {
  club_schedule_id Int
  user_id          String           @db.VarChar
  status           String?          @default("pending") @db.VarChar(20)
  bi_club_schedule bi_club_schedule @relation(fields: [club_schedule_id], references: [club_schedule_id], onDelete: Cascade, onUpdate: NoAction)
  bi_user          User             @relation(fields: [user_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction)

  @@id([club_schedule_id, user_id])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_club_tag {
  club_tag_id Int    @id @default(autoincrement())
  club_id     Int
  name        String @db.VarChar(50)
  bi_club     Club   @relation(fields: [club_id], references: [club_id], onDelete: Cascade, onUpdate: NoAction)

  @@schema("public")
}

model bi_image {
  id                                         Int             @id @default(autoincrement())
  url                                        String
  public_id                                  String?
  file_name                                  String
  file_size                                  Int
  file_type                                  String
  width                                      Int?
  height                                     Int?
  alt                                        String?
  description                                String?
  user_id                                    String?
  entity_type                                String?
  entity_id                                  String?
  created_at                                 DateTime        @default(now()) @db.Timestamp(6)
  updated_at                                 DateTime?       @default(now()) @db.Timestamp(6)
  bi_club_bi_club_banner_image_idTobi_image  Club[]          @relation("bi_club_banner_image_idTobi_image")
  bi_club_bi_club_profile_image_idTobi_image Club[]          @relation("bi_club_profile_image_idTobi_image")
  bi_post_image                              bi_post_image[]

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_bookmark {
  id         Int       @id @default(autoincrement())
  post_id    Int
  user_id    Int
  created_at DateTime? @default(now()) @db.Timestamp(6)
  bi_post    bi_post   @relation(fields: [post_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bi_user    User      @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([post_id, user_id])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_category {
  id          Int           @id @default(autoincrement())
  name        String        @db.VarChar(50)
  description String?
  order       Int?          @default(0)
  is_active   Boolean?      @default(true)
  created_at  DateTime?     @default(now()) @db.Timestamp(6)
  updated_at  DateTime?     @default(now()) @db.Timestamp(6)
  bi_post     bi_post[]
  bi_post_log bi_post_log[]

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_comment {
  id                  Int                   @id @default(autoincrement())
  content             String
  post_id             Int
  author_id           String                @db.VarChar
  parent_id           Int?
  is_deleted          Boolean?              @default(false)
  created_at          DateTime?             @default(now()) @db.Timestamp(6)
  updated_at          DateTime?             @default(now()) @db.Timestamp(6)
  bi_user             User                  @relation(fields: [author_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction)
  bi_comment          bi_comment?           @relation("bi_commentTobi_comment", fields: [parent_id], references: [id], onUpdate: NoAction)
  other_bi_comment    bi_comment[]          @relation("bi_commentTobi_comment")
  bi_post             bi_post               @relation(fields: [post_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bi_comment_like     bi_comment_like[]
  bi_comment_like_log bi_comment_like_log[]
  bi_comment_log      bi_comment_log[]

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_comment_like {
  id         Int        @id @default(autoincrement())
  comment_id Int
  user_id    String     @db.VarChar
  created_at DateTime?  @default(now()) @db.Timestamp(6)
  bi_comment bi_comment @relation(fields: [comment_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bi_user    User       @relation(fields: [user_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([comment_id, user_id])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_post {
  id                  Int                   @id @default(autoincrement())
  title               String                @db.VarChar(200)
  content             String
  category_id         Int
  view_count          Int?                  @default(0)
  is_hot              Boolean?              @default(false)
  is_pinned           Boolean?              @default(false)
  is_deleted          Boolean?              @default(false)
  location            String?
  latitude            Float?                @db.Real
  longitude           Float?                @db.Real
  created_at          DateTime?             @default(now()) @db.Timestamp(6)
  updated_at          DateTime?             @default(now()) @db.Timestamp(6)
  author_id           String?               @db.VarChar
  bi_bookmark         bi_bookmark[]
  bi_comment          bi_comment[]
  bi_comment_log      bi_comment_log[]
  bi_user             User?                 @relation(fields: [author_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction)
  bi_category         bi_category           @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  bi_post_image       bi_post_image[]
  bi_post_like        bi_post_like[]
  bi_post_log         bi_post_log[]
  bi_post_tag         bi_post_tag[]
  bi_view_log         bi_view_log[]
  bi_view_stats_daily bi_view_stats_daily[]

  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_post_image {
  id         Int       @id @default(autoincrement())
  post_id    Int
  image_id   Int
  order      Int?      @default(0)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  bi_image   bi_image  @relation(fields: [image_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bi_post    bi_post   @relation(fields: [post_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([post_id, image_id])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_post_like {
  id         Int       @id @default(autoincrement())
  post_id    Int
  user_id    Int
  created_at DateTime? @default(now()) @db.Timestamp(6)
  bi_post    bi_post   @relation(fields: [post_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bi_user    User      @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([post_id, user_id])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_post_tag {
  id         Int       @id @default(autoincrement())
  post_id    Int
  tag_id     Int
  created_at DateTime? @default(now()) @db.Timestamp(6)
  bi_post    bi_post   @relation(fields: [post_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  bi_tag     bi_tag    @relation(fields: [tag_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([post_id, tag_id])
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_tag {
  id          Int           @id @default(autoincrement())
  name        String        @unique @db.VarChar(50)
  created_at  DateTime?     @default(now()) @db.Timestamp(6)
  bi_post_tag bi_post_tag[]

  @@schema("public")
}

model bi_view_log {
  id         Int      @id @default(autoincrement())
  post_id    Int
  user_id    String?  @db.VarChar
  ip_address String?  @db.VarChar(45)
  user_agent String?  @db.VarChar(255)
  viewed_at  DateTime @default(now()) @db.Timestamp(6)
  bi_post    bi_post  @relation(fields: [post_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_view_log_post")
  bi_user    User?    @relation(fields: [user_id], references: [mb_id], onUpdate: NoAction, map: "fk_view_log_user")

  @@index([viewed_at], map: "idx_view_log_viewed_at")
  @@schema("public")
}

model bi_view_stats_daily {
  id            Int      @id @default(autoincrement())
  post_id       Int
  view_date     DateTime @db.Date
  view_count    Int      @default(0)
  unique_users  Int      @default(0)
  like_count    Int      @default(0)
  comment_count Int      @default(0)
  bi_post       bi_post  @relation(fields: [post_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_view_stats_post")

  @@unique([post_id, view_date], map: "uq_post_date")
  @@index([view_date], map: "idx_view_stats_view_date")
  @@index([like_count], map: "idx_view_stats_like_count")
  @@schema("public")
}

model bi_comment_like_log {
  id         Int        @id @default(autoincrement())
  comment_id Int
  user_id    String     @db.VarChar
  ip_address String?    @db.VarChar(45)
  user_agent String?    @db.VarChar(255)
  action     String     @db.VarChar(20)
  created_at DateTime   @default(now()) @db.Timestamp(6)
  bi_comment bi_comment @relation(fields: [comment_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_comment_like_log_comment")
  bi_user    User       @relation(fields: [user_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_comment_like_log_user")

  @@index([action], map: "idx_comment_like_log_action")
  @@index([comment_id], map: "idx_comment_like_log_comment_id")
  @@index([created_at], map: "idx_comment_like_log_created_at")
  @@index([user_id], map: "idx_comment_like_log_user_id")
  @@schema("public")
}

model bi_comment_log {
  id          Int        @id @default(autoincrement())
  comment_id  Int
  post_id     Int
  user_id     String     @db.VarChar
  ip_address  String?    @db.VarChar(45)
  user_agent  String?    @db.VarChar(255)
  action      String     @db.VarChar(20)
  created_at  DateTime   @default(now()) @db.Timestamp(6)
  bak_content String?
  bi_comment  bi_comment @relation(fields: [comment_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_comment_log_comment")
  bi_post     bi_post    @relation(fields: [post_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_comment_log_post")
  bi_user     User       @relation(fields: [user_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_comment_log_user")

  @@index([action], map: "idx_comment_log_action")
  @@index([created_at], map: "idx_comment_log_created_at")
  @@index([post_id], map: "idx_comment_log_post_id")
  @@index([user_id], map: "idx_comment_log_user_id")
  @@schema("public")
}

model bi_post_log {
  id                                     Int         @id @default(autoincrement())
  post_id                                Int
  author_id                              String      @db.VarChar(200)
  title                                  String      @db.VarChar(200)
  content                                String
  category_id                            Int
  action                                 String      @db.VarChar(20)
  user_id                                String      @db.VarChar(200)
  ip_address                             String?     @db.VarChar(45)
  user_agent                             String?     @db.VarChar(255)
  created_at                             DateTime    @default(now()) @db.Timestamp(6)
  original_created_at                    DateTime?   @db.Timestamp(6)
  original_updated_at                    DateTime?   @db.Timestamp(6)
  bi_user_bi_post_log_author_idTobi_user User        @relation("bi_post_log_author_idTobi_user", fields: [author_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_post_log_author")
  bi_category                            bi_category @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_post_log_category")
  bi_post                                bi_post     @relation(fields: [post_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_post_log_post")
  bi_user_bi_post_log_user_idTobi_user   User        @relation("bi_post_log_user_idTobi_user", fields: [user_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_post_log_user")

  @@index([action], map: "idx_post_log_action")
  @@index([author_id], map: "idx_post_log_author_id")
  @@index([created_at], map: "idx_post_log_created_at")
  @@index([post_id], map: "idx_post_log_post_id")
  @@index([user_id], map: "idx_post_log_user_id")
  @@schema("public")
}

model bi_report {
  id                                          String             @id(map: "Report_pkey")
  created_at                                  DateTime           @default(now()) @db.Timestamptz(6)
  updated_at                                  DateTime           @default(now()) @db.Timestamptz(6)
  reporter_id                                 String
  reported_user_id                            String
  content_id                                  String?
  content_type                                String?
  type                                        report_type
  description                                 String?
  status                                      report_status      @default(PENDING)
  ip_address                                  String?
  action_taken                                action_type?
  bi_user_bi_report_reported_user_idTobi_user User               @relation("bi_report_reported_user_idTobi_user", fields: [reported_user_id], references: [mb_id], map: "Report_reportedUserId_fkey")
  bi_user_bi_report_reporter_idTobi_user      User               @relation("bi_report_reporter_idTobi_user", fields: [reporter_id], references: [mb_id], map: "Report_reporterId_fkey")
  bi_report_review                            bi_report_review[]

  @@index([created_at], map: "Report_createdAt_idx")
  @@index([reported_user_id], map: "Report_reportedUserId_idx")
  @@index([reporter_id], map: "Report_reporterId_idx")
  @@index([status], map: "Report_status_idx")
  @@schema("public")
}

model bi_report_limit {
  id             String   @id(map: "ReportLimit_pkey")
  user_id        String?  @unique(map: "ReportLimit_userId_key")
  ip_address     String?  @unique(map: "ReportLimit_ipAddress_key")
  report_count   Int      @default(0)
  last_report_at DateTime @default(now()) @db.Timestamptz(6)

  @@index([ip_address], map: "ReportLimit_ipAddress_idx")
  @@index([user_id], map: "ReportLimit_userId_idx")
  @@schema("public")
}

model bi_report_metrics {
  id                    String   @id(map: "ReportMetrics_pkey")
  date                  DateTime @unique(map: "ReportMetrics_date_key") @default(now()) @db.Timestamptz(6)
  total_reports         Int      @default(0)
  resolved_reports      Int      @default(0)
  pending_reports       Int      @default(0)
  false_reports         Int      @default(0)
  harassment_reports    Int      @default(0)
  spam_reports          Int      @default(0)
  inappropriate_reports Int      @default(0)
  hate_speech_reports   Int      @default(0)
  threat_reports        Int      @default(0)
  personal_info_reports Int      @default(0)
  other_reports         Int      @default(0)

  @@index([date], map: "ReportMetrics_date_idx")
  @@schema("public")
}

model bi_report_review {
  id           String      @id(map: "ReportReview_pkey")
  created_at   DateTime    @default(now()) @db.Timestamptz(6)
  moderator_id String
  report_id    String
  decision     action_type
  comment      String?
  bi_user      User        @relation(fields: [moderator_id], references: [mb_id], map: "ReportReview_moderatorId_fkey")
  bi_report    bi_report   @relation(fields: [report_id], references: [id], map: "ReportReview_reportId_fkey")

  @@index([moderator_id], map: "ReportReview_moderatorId_idx")
  @@index([report_id], map: "ReportReview_reportId_idx")
  @@schema("public")
}

model user_sessions {
  id            Int       @id @default(autoincrement())
  user_id       Int?
  session_id    String?   @unique @db.VarChar(100)
  ip_address    String?   @db.VarChar(45)
  user_agent    String?
  device_type   String?   @db.VarChar(20)
  start_time    DateTime? @default(now()) @db.Timestamp(6)
  last_activity DateTime? @default(now()) @db.Timestamp(6)
  is_active     Boolean?  @default(true)
  bi_user       User?     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("public")
}

model visit_logs {
  id          Int       @id @default(autoincrement())
  user_id     Int?
  session_id  String?   @db.VarChar(100)
  ip_address  String?   @db.VarChar(45)
  user_agent  String?
  device_type String?   @db.VarChar(20)
  browser     String?   @db.VarChar(50)
  os          String?   @db.VarChar(50)
  referer_url String?
  page_url    String?
  visit_time  DateTime? @default(now()) @db.Timestamp(6)
  exit_time   DateTime? @db.Timestamp(6)
  time_spent  Int?
  bi_user     User?     @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@schema("public")
}

model bi_notice {
  id        Int      @id(map: "Notice_pkey") @default(autoincrement())
  title     String
  content   String
  date      DateTime @default(now())
  published Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime
  category  String?  @db.VarChar

  @@schema("ownerdb")
}

model bi_popup {
  id         String    @id @default(dbgenerated("gen_random_uuid()"))
  title      String
  content    String
  image_url  String?
  link_url   String?
  start_date DateTime  @db.Timestamp(6)
  end_date   DateTime  @db.Timestamp(6)
  is_active  Boolean?  @default(true)
  width      Int?      @default(400)
  height     Int?      @default(300)
  position   String?   @default("center")
  show_once  Boolean?  @default(false)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  updated_at DateTime? @default(now()) @db.Timestamp(6)
  display_on String?   @default("client")
  order      Int?      @default(0)

  @@schema("public")
}

model bi_inquiry {
  id          String    @id(map: "Inquiry_pkey")
  name        String
  email       String
  subject     String
  message     String
  status      String    @default("pending")
  user_id     String?
  created_at  DateTime  @default(now())
  updated_at  DateTime?
  answer      String?
  answered_at DateTime?
  answered_by String?
  bi_user     User?     @relation(fields: [user_id], references: [mb_id], map: "Inquiry_userId_fkey")

  @@index([created_at], map: "Inquiry_createdAt_idx")
  @@index([status], map: "Inquiry_status_idx")
  @@index([user_id], map: "Inquiry_userId_idx")
  @@schema("public")
}

model bi_faq {
  id              Int              @id @default(autoincrement())
  question        String
  answer          String
  category_id     Int?
  is_active       Boolean?         @default(true)
  display_order   Int?             @default(0)
  created_at      DateTime?        @default(now()) @db.Timestamptz(6)
  updated_at      DateTime?        @default(now()) @db.Timestamptz(6)
  created_by      String?          @db.VarChar(50)
  updated_by      String?          @db.VarChar(50)
  bi_faq_category bi_faq_category? @relation(fields: [category_id], references: [id], onUpdate: NoAction, map: "fk_bi_faq_category")

  @@index([category_id], map: "idx_bi_faq_category_id")
  @@index([is_active], map: "idx_bi_faq_is_active")
  @@schema("public")
}

model bi_faq_category {
  id            Int       @id @default(autoincrement())
  name          String    @db.VarChar(100)
  display_order Int?      @default(0)
  is_active     Boolean?  @default(true)
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  updated_at    DateTime? @default(now()) @db.Timestamptz(6)
  created_by    String?   @db.VarChar(50)
  updated_by    String?   @db.VarChar(50)
  bi_faq        bi_faq[]

  @@index([is_active], map: "idx_bi_faq_category_is_active")
  @@schema("public")
}

model bi_user_penalty {
  penalty_id     Int       @id @default(autoincrement())
  user_id        String    @db.VarChar(255)
  penalty_type   String    @db.VarChar(50)
  penalty_reason String?
  penalty_count  Int?      @default(1)
  penalty_level  Int?      @default(1)
  created_at     DateTime? @default(now()) @db.Timestamptz(6)
  updated_at     DateTime? @default(now()) @db.Timestamptz(6)
  expires_at     DateTime  @db.Timestamptz(6)
  is_active      Boolean?  @default(true)
  match_id       Int?
  reported_by    String?   @db.VarChar(255)
  confirmed_by   String?   @db.VarChar(255)
  bi_match       bi_match? @relation(fields: [match_id], references: [match_id], onUpdate: NoAction, map: "fk_match")
  bi_user        User      @relation(fields: [user_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_user")

  @@index([expires_at], map: "idx_user_penalty_expires_at")
  @@index([is_active], map: "idx_user_penalty_is_active")
  @@index([penalty_type], map: "idx_user_penalty_type")
  @@index([user_id], map: "idx_user_penalty_user_id")
  @@schema("public")
}

model bi_checkin {
  checkin_id           Int            @id @default(autoincrement())
  match_id             Int            @unique
  player1_checkin      Boolean        @default(false)
  player2_checkin      Boolean        @default(false)
  player1_checkin_time DateTime?      @db.Timestamp(6)
  player2_checkin_time DateTime?      @db.Timestamp(6)
  player1_status       checkin_status @default(PENDING)
  player2_status       checkin_status @default(PENDING)
  location_verified    Boolean        @default(false)
  created_at           DateTime       @default(now()) @db.Timestamp(6)
  updated_at           DateTime       @default(now()) @db.Timestamp(6)
  notes                String?        @db.VarChar(500)
  bi_match             bi_match       @relation(fields: [match_id], references: [match_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_match_id")

  @@schema("public")
}

model bi_user_suspension {
  suspension_id     Int       @id @default(autoincrement())
  user_id           String    @db.VarChar(255)
  start_date        DateTime  @default(now()) @db.Timestamptz(6)
  end_date          DateTime  @db.Timestamptz(6)
  suspension_reason String    @db.VarChar(50)
  description       String?
  is_active         Boolean?  @default(true)
  created_at        DateTime? @default(now()) @db.Timestamptz(6)
  updated_at        DateTime? @default(now()) @db.Timestamptz(6)
  bi_user           User      @relation(fields: [user_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_user")

  @@index([end_date], map: "idx_user_suspension_end_date")
  @@index([is_active], map: "idx_user_suspension_is_active")
  @@index([user_id], map: "idx_user_suspension_user_id")
  @@schema("public")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bi_user_block {
  block_id                                  Int      @id @default(autoincrement())
  blocker_id                                String   @db.VarChar
  blocked_id                                String   @db.VarChar
  block_date                                DateTime @default(now()) @db.Timestamp(6)
  block_reason                              String?  @db.VarChar(200)
  is_active                                 Boolean  @default(true)
  bi_user_bi_user_block_blocked_idTobi_user User     @relation("bi_user_block_blocked_idTobi_user", fields: [blocked_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_blocked_id")
  bi_user_bi_user_block_blocker_idTobi_user User     @relation("bi_user_block_blocker_idTobi_user", fields: [blocker_id], references: [mb_id], onDelete: Cascade, onUpdate: NoAction, map: "fk_blocker_id")

  @@unique([blocker_id, blocked_id], map: "unique_block")
  @@index([is_active], map: "idx_block_active")
  @@index([blocked_id], map: "idx_blocked_id")
  @@index([blocker_id], map: "idx_blocker_id")
  @@schema("public")
}

enum GameType {
  THREE_BALL @map("3")
  FOUR_BALL  @map("4")

  @@schema("public")
}

enum game_type_enum {
  THREE_BALL
  FOUR_BALL
  POCKET_BALL

  @@schema("public")
}

enum match_request_type_enum {
  PENDING
  ACCEPTED
  REJECTED
  CANCELED

  @@schema("public")
}

enum match_status {
  PENDING
  ACCEPTED
  IN_PROGRESS
  COMPLETED
  EVALUATE
  REJECTED
  CANCELLED

  @@schema("public")
}

enum match_status_enum {
  COMPLETED
  ONGOING
  CANCELED

  @@schema("public")
}

enum request_status {
  PENDING
  ACCEPTED
  REJECTED
  CANCELLED
  EXPIRED

  @@schema("public")
}

enum MatchType {
  ONE_VS_ONE
  TWO_VS_TWO

  @@schema("public")
}

enum bi_user_level {
  ADMIN
  BOSS
  MEMBER

  @@schema("public")
}

enum action_type {
  NONE
  WARNING
  TEMPORARY_BAN
  PERMANENT_BAN
  CONTENT_REMOVAL
  FEATURE_RESTRICTION

  @@schema("public")
}

enum report_status {
  PENDING
  REVIEWING
  RESOLVED
  REJECTED

  @@schema("public")
}

enum report_type {
  HARASSMENT
  SPAM
  INAPPROPRIATE_CONTENT
  HATE_SPEECH
  THREAT
  PERSONAL_INFO
  OTHER

  @@schema("public")
}

enum checkin_status {
  PENDING
  ARRIVED
  LATE
  NO_SHOW

  @@schema("public")
}
